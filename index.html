<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduOS // Liquid Plasma Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap');

        :root {
            --bg-liquid-1: #0f0c29;
            --bg-liquid-2: #302b63;
            --bg-liquid-3: #24243e;
            --glass-bg: rgba(20, 20, 30, 0.65);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            --accent: #00f2ff;
            --text: #ffffff;
            --window-radius: 12px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }

        body {
            font-family: 'Inter', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            color: var(--text);
            /* Fondo L√≠quido Animado */
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #141E30);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- ORBES FLOTANTES (Efecto Liquid) --- */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            z-index: 0;
            animation: floatOrb 20s infinite alternate;
        }
        .orb-1 { width: 400px; height: 400px; background: #8e2de2; top: -100px; left: -100px; }
        .orb-2 { width: 500px; height: 500px; background: #4a00e0; bottom: -100px; right: -100px; animation-delay: -5s; }
        .orb-3 { width: 300px; height: 300px; background: var(--accent); top: 40%; left: 40%; animation-delay: -10s; opacity: 0.3; }

        @keyframes floatOrb {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(50px, -50px) scale(1.1); }
        }

        /* --- ESCRITORIO --- */
        .desktop {
            position: absolute;
            top: 0; left: 0; width: 100%; height: calc(100% - 60px);
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            align-content: flex-start;
            gap: 20px;
            z-index: 1;
        }

        .desktop-icon {
            width: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: 0.2s;
            padding: 10px;
            border-radius: 8px;
        }

        .desktop-icon:hover { background: rgba(255,255,255,0.1); }
        .desktop-icon img, .desktop-icon div.icon-placeholder {
            width: 48px; height: 48px; margin-bottom: 5px;
            font-size: 2rem; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05));
            border-radius: 12px; border: 1px solid var(--glass-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .desktop-icon span { font-size: 0.8rem; text-shadow: 0 1px 3px rgba(0,0,0,0.8); text-align: center; }

        /* --- VENTANAS (OS WINDOWS) --- */
        .window {
            position: absolute;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--window-radius);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: opacity 0.2s, transform 0.2s;
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
            z-index: 10;
            min-width: 300px;
            min-height: 200px;
        }

        .window.active {
            opacity: 1;
            transform: scale(1);
            pointer-events: all;
        }

        .window-header {
            height: 36px;
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            cursor: grab;
        }
        .window-header:active { cursor: grabbing; }

        .window-title { font-size: 0.85rem; font-weight: 600; opacity: 0.8; display: flex; align-items: center; gap: 8px; }
        .window-controls { display: flex; gap: 6px; }
        .win-btn { width: 12px; height: 12px; border-radius: 50%; border: none; cursor: pointer; }
        .btn-close { background: #ff5f56; }
        .btn-min { background: #ffbd2e; }
        .btn-max { background: #27c93f; }

        .window-body {
            flex: 1;
            overflow: auto;
            padding: 15px;
            color: #eee;
        }

        /* --- ESTILOS ESPEC√çFICOS DE APPS --- */
        /* Horario */
        .schedule-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 4px;
        }
        .schedule-table th { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }
        .schedule-table td { 
            background: rgba(255,255,255,0.05); 
            padding: 10px; 
            border-radius: 4px; 
            font-size: 0.8rem; 
            vertical-align: middle;
            transition: 0.2s;
            cursor: default;
        }
        .schedule-table td:hover { background: rgba(255,255,255,0.1); transform: translateY(-2px); }
        .cell-time { font-family: 'JetBrains Mono', monospace; color: var(--accent); font-weight: bold; text-align: center;}
        .cell-break { background: rgba(255, 189, 46, 0.1) !important; color: #ffbd2e; text-align: center; font-weight: bold; letter-spacing: 2px;}

        /* Clicker Game */
        .clicker-container { display: flex; flex-direction: column; align-items: center; height: 100%; justify-content: center; gap: 20px; }
        .mining-rig { width: 120px; height: 120px; background: radial-gradient(circle, #2a2a35, #000); border: 2px solid var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; cursor: pointer; box-shadow: 0 0 20px var(--accent); transition: 0.1s; }
        .mining-rig:active { transform: scale(0.95); }
        .stats-panel { text-align: center; }
        .coin-count { font-size: 2.5rem; font-weight: 800; color: var(--accent); font-family: 'JetBrains Mono'; }
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; margin-top: 20px; }
        .shop-item { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; cursor: pointer; text-align: left; }
        .shop-item:hover { background: rgba(255,255,255,0.2); }

        /* Memory Game */
        .memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; width: 100%; max-width: 400px; margin: 0 auto; }
        .memory-card { aspect-ratio: 1; background: rgba(255,255,255,0.1); border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 2rem; transform-style: preserve-3d; transition: 0.3s; }
        .memory-card.flipped { background: var(--accent); color: #000; transform: rotateY(180deg); }
        .memory-card.matched { background: #27c93f; opacity: 0.5; pointer-events: none; }

        /* --- BARRA DE TAREAS (KDE STYLE) --- */
        .taskbar {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            height: 56px;
            background: rgba(10, 10, 15, 0.75);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 28px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 15px;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .taskbar-divider { width: 1px; height: 30px; background: rgba(255,255,255,0.1); }

        .app-icon {
            width: 42px; height: 42px;
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            background: rgba(255,255,255,0.05);
        }
        .app-icon:hover { transform: translateY(-5px) scale(1.1); background: rgba(255,255,255,0.15); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        
        .app-icon.active::after {
            content: ''; position: absolute; bottom: -6px; width: 4px; height: 4px; border-radius: 50%; background: var(--accent);
        }

        .clock-widget {
            font-size: 0.85rem;
            text-align: right;
            line-height: 1.2;
            color: #ccc;
            margin-left: 10px;
        }

    </style>
</head>
<body>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="desktop">
        <div class="desktop-icon" onclick="openWindow('scheduleWin')">
            <div class="icon-placeholder">üìÖ</div>
            <span>Horario</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('minerWin')">
            <div class="icon-placeholder">‚õèÔ∏è</div>
            <span>Miner</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('snakeWin')">
            <div class="icon-placeholder">üêç</div>
            <span>Snake</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('memoryWin')">
            <div class="icon-placeholder">üß†</div>
            <span>Memory</span>
        </div>
    </div>

    <div id="scheduleWin" class="window" style="top: 50px; left: 50px; width: 900px; height: 600px;">
        <div class="window-header" onmousedown="startDrag(event, 'scheduleWin')">
            <div class="window-title">üìÖ Academic Schedule.xls</div>
            <div class="window-controls">
                <button class="win-btn btn-min"></button>
                <button class="win-btn btn-max"></button>
                <button class="win-btn btn-close" onclick="closeWindow('scheduleWin')"></button>
            </div>
        </div>
        <div class="window-body">
            <table class="schedule-table">
                <thead>
                    <tr>
                        <th>Hora</th><th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th>
                    </tr>
                </thead>
                <tbody id="scheduleBody">
                    </tbody>
            </table>
        </div>
    </div>

    <div id="minerWin" class="window" style="top: 80px; left: 150px; width: 400px; height: 500px;">
        <div class="window-header" onmousedown="startDrag(event, 'minerWin')">
            <div class="window-title">‚õèÔ∏è EduCoin Miner v2.0</div>
            <div class="window-controls">
                <button class="win-btn btn-close" onclick="closeWindow('minerWin')"></button>
            </div>
        </div>
        <div class="window-body">
            <div class="clicker-container">
                <div class="stats-panel">
                    <div class="coin-count" id="coinCount">0.00</div>
                    <div style="font-size: 0.8rem; color: #aaa;">EDU/s: <span id="cpsCount">0.0</span></div>
                </div>
                <div class="mining-rig" onclick="clickMine()">‚ö°</div>
                <div class="shop-grid" id="shopGrid"></div>
            </div>
        </div>
    </div>

    <div id="snakeWin" class="window" style="top: 100px; left: 300px; width: 440px; height: 500px;">
        <div class="window-header" onmousedown="startDrag(event, 'snakeWin')">
            <div class="window-title">üêç Neon Snake.exe</div>
            <div class="window-controls">
                <button class="win-btn btn-close" onclick="closeWindow('snakeWin')"></button>
            </div>
        </div>
        <div class="window-body" style="display:flex; flex-direction:column; align-items:center;">
            <canvas id="snakeCanvas" width="400" height="400" style="background: #000; border: 1px solid var(--accent);"></canvas>
            <div style="margin-top: 10px;">Score: <span id="snakeScore">0</span></div>
            <button onclick="initSnake()" style="margin-top:10px; padding:5px 15px; background:var(--accent); border:none; border-radius:4px; font-weight:bold;">Reiniciar</button>
        </div>
    </div>

    <div id="memoryWin" class="window" style="top: 120px; left: 400px; width: 450px; height: 500px;">
        <div class="window-header" onmousedown="startDrag(event, 'memoryWin')">
            <div class="window-title">üß† Memory Matrix</div>
            <div class="window-controls">
                <button class="win-btn btn-close" onclick="closeWindow('memoryWin')"></button>
            </div>
        </div>
        <div class="window-body">
            <div style="text-align: center; margin-bottom: 15px;">Encuentra los pares</div>
            <div class="memory-grid" id="memoryGrid"></div>
            <div style="text-align:center; margin-top:20px;">
                <button onclick="initMemory()" style="padding:8px 20px; background: #fff; color:#000; border:none; border-radius:20px; cursor:pointer;">Reiniciar Partida</button>
            </div>
        </div>
    </div>

    <div class="taskbar">
        <div class="app-icon" style="background: rgba(255,255,255,0.15)">‚ùñ</div> <div class="taskbar-divider"></div>
        <div class="app-icon" onclick="toggleWindow('scheduleWin')" title="Horario">üìÖ</div>
        <div class="app-icon" onclick="toggleWindow('minerWin')" title="Miner">‚õèÔ∏è</div>
        <div class="app-icon" onclick="toggleWindow('snakeWin')" title="Snake">üêç</div>
        <div class="app-icon" onclick="toggleWindow('memoryWin')" title="Memory">üß†</div>
        <div class="taskbar-divider"></div>
        <div class="clock-widget" id="clock">
            12:00<br><span style="font-size:0.7em; opacity:0.7">12/04</span>
        </div>
    </div>

    <script>
        // --- LOGICA DE VENTANAS (OS) ---
        let highestZ = 100;

        function openWindow(id) {
            const win = document.getElementById(id);
            win.classList.add('active');
            bringToFront(id);
            // Iniciar juegos si corresponde
            if(id === 'snakeWin' && !snakeInterval) initSnake();
            if(id === 'memoryWin' && document.getElementById('memoryGrid').innerHTML === '') initMemory();
        }

        function closeWindow(id) {
            const win = document.getElementById(id);
            win.classList.remove('active');
            if(id === 'snakeWin') clearInterval(snakeInterval);
        }

        function toggleWindow(id) {
            const win = document.getElementById(id);
            if(win.classList.contains('active')) {
                // Si est√° activa pero no en foco, poner en foco. Si ya est√° en foco, cerrar/minimizar
                if(win.style.zIndex < highestZ) {
                    bringToFront(id);
                } else {
                    closeWindow(id);
                }
            } else {
                openWindow(id);
            }
        }

        function bringToFront(id) {
            highestZ++;
            document.getElementById(id).style.zIndex = highestZ;
        }

        // --- SISTEMA DE ARRASTRE (DRAG AND DROP) ---
        let isDragging = false;
        let currentWin = null;
        let offset = { x: 0, y: 0 };

        function startDrag(e, id) {
            isDragging = true;
            currentWin = document.getElementById(id);
            bringToFront(id);
            offset.x = e.clientX - currentWin.offsetLeft;
            offset.y = e.clientY - currentWin.offsetTop;
        }

        document.addEventListener('mousemove', (e) => {
            if (!isDragging || !currentWin) return;
            currentWin.style.left = (e.clientX - offset.x) + 'px';
            currentWin.style.top = (e.clientY - offset.y) + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            currentWin = null;
        });

        // --- 1. RENDERIZADO DEL HORARIO ---
        const scheduleData = [
            ['8:30', 'Sistemas Operativos Monopuesto', 'Redes Locales', 'Digitalizaci√≥n Aplicada a los Sectores Productivos GM', 'Aplicaciones Ofim√°ticas', 'Aplicaciones Ofim√°ticas'],
            ['9:30', 'Sistemas Operativos Monopuesto', 'Redes Locales', 'Sistemas Operativos Monopuesto', 'Aplicaciones Ofim√°ticas', 'Aplicaciones Ofim√°ticas'],
            ['10:30', 'Aplicaciones Ofim√°ticas', 'Redes Locales', 'Sistemas Operativos Monopuesto', 'Itinerario Personal para la Empleabilidad I', 'Sistemas Operativos Monopuesto'],
            ['11:30', 'DESCANSO', 'DESCANSO', 'DESCANSO', 'DESCANSO', 'DESCANSO'],
            ['12:00', 'Aplicaciones Ofim√°ticas', 'Montaje y Mantenimiento de Equipo', 'Redes Locales', 'Redes Locales', 'Montaje y Mantenimiento de Equipo'],
            ['13:00', 'Montaje y Mantenimiento de Equipo', 'Montaje y Mantenimiento de Equipo', 'Redes Locales', 'Redes Locales', 'Itinerario Personal para la Empleabilidad I'],
            ['14:00', 'Montaje y Mantenimiento de Equipo', 'Itinerario Personal para la Empleabilidad I', 'Aplicaciones Ofim√°ticas', 'Montaje y Mantenimiento de Equipo', 'Sostenibilidad Aplicada al Sistema Productivo']
        ];

        const tbody = document.getElementById('scheduleBody');
        scheduleData.forEach(row => {
            const tr = document.createElement('tr');
            row.forEach((cell, i) => {
                const td = document.createElement('td');
                if (i === 0) {
                    td.innerText = cell;
                    td.className = 'cell-time';
                } else if (cell === 'DESCANSO') {
                    td.innerText = '‚òï DESCANSO';
                    td.className = 'cell-break';
                } else {
                    td.innerText = cell;
                }
                tr.appendChild(td);
            });
            tbody.appendChild(tr);
        });

        // --- 2. JUEGO: CRYPTO CLICKER ---
        let coins = 0;
        let cps = 0;
        const shopItems = [
            { name: 'GPU B√°sica', cost: 50, cps: 1 },
            { name: 'ASIC Miner', cost: 200, cps: 5 },
            { name: 'Granja Solar', cost: 1000, cps: 20 },
            { name: 'Quantum CPU', cost: 5000, cps: 100 }
        ];

        function clickMine() {
            coins += 1;
            updateMinerUI();
        }

        function buyItem(idx) {
            const item = shopItems[idx];
            if(coins >= item.cost) {
                coins -= item.cost;
                cps += item.cps;
                item.cost = Math.floor(item.cost * 1.5);
                updateMinerUI();
                renderShop();
            }
        }

        function renderShop() {
            const grid = document.getElementById('shopGrid');
            grid.innerHTML = '';
            shopItems.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = 'shop-item';
                div.innerHTML = `
                    <div style="font-weight:bold">${item.name}</div>
                    <div style="color:var(--accent)">+${item.cps} CPS</div>
                    <div style="font-size:0.8em; opacity:0.7">Cost: ${item.cost}</div>
                `;
                div.onclick = () => buyItem(idx);
                grid.appendChild(div);
            });
        }
        
        function updateMinerUI() {
            document.getElementById('coinCount').innerText = coins.toFixed(2);
            document.getElementById('cpsCount').innerText = cps.toFixed(1);
        }

        setInterval(() => {
            coins += cps / 10;
            updateMinerUI();
        }, 100);
        renderShop();

        // --- 3. JUEGO: NEON SNAKE ---
        const canvas = document.getElementById('snakeCanvas');
        const ctx = canvas.getContext('2d');
        const box = 20;
        let snake = [];
        let food = {};
        let d = '';
        let snakeInterval;
        let snakeScore = 0;

        function initSnake() {
            snake = [{x: 9*box, y: 10*box}];
            food = {
                x: Math.floor(Math.random()*19+1) * box,
                y: Math.floor(Math.random()*19+1) * box
            };
            scoreSnake = 0;
            d = '';
            document.getElementById('snakeScore').innerText = '0';
            if(snakeInterval) clearInterval(snakeInterval);
            snakeInterval = setInterval(drawSnake, 100);
        }

        document.addEventListener('keydown', (e) => {
            if(e.keyCode == 37 && d != 'RIGHT') d = 'LEFT';
            else if(e.keyCode == 38 && d != 'DOWN') d = 'UP';
            else if(e.keyCode == 39 && d != 'LEFT') d = 'RIGHT';
            else if(e.keyCode == 40 && d != 'UP') d = 'DOWN';
        });

        function drawSnake() {
            ctx.fillStyle = "#000";
            ctx.fillRect(0,0,400,400);

            for(let i=0; i<snake.length; i++) {
                ctx.fillStyle = (i == 0) ? "#00f2ff" : "#fff";
                ctx.fillRect(snake[i].x, snake[i].y, box, box);
                ctx.strokeStyle = "#000";
                ctx.strokeRect(snake[i].x, snake[i].y, box, box);
            }

            ctx.fillStyle = "#ff00e6"; // Comida rosa
            ctx.fillRect(food.x, food.y, box, box);

            let snakeX = snake[0].x;
            let snakeY = snake[0].y;

            if(d == 'LEFT') snakeX -= box;
            if(d == 'UP') snakeY -= box;
            if(d == 'RIGHT') snakeX += box;
            if(d == 'DOWN') snakeY += box;

            if(snakeX == food.x && snakeY == food.y) {
                scoreSnake++;
                document.getElementById('snakeScore').innerText = scoreSnake;
                food = {
                    x: Math.floor(Math.random()*19) * box,
                    y: Math.floor(Math.random()*19) * box
                };
            } else {
                snake.pop();
            }

            let newHead = {x: snakeX, y: snakeY};

            if(snakeX < 0 || snakeX >= 400 || snakeY < 0 || snakeY >= 400 || collision(newHead, snake)) {
                clearInterval(snakeInterval);
                ctx.fillStyle = "white";
                ctx.font = "30px Arial";
                ctx.fillText("Game Over", 120, 200);
            }

            snake.unshift(newHead);
        }

        function collision(head, array) {
            for(let i=0; i<array.length; i++) {
                if(head.x == array[i].x && head.y == array[i].y) return true;
            }
            return false;
        }

        // --- 4. JUEGO: MEMORY MATRIX ---
        const icons = ['üöÄ','üéÆ','üíø','ü§ñ','üëΩ','üëæ','üéÉ','üíé'];
        let memoryCards = [...icons, ...icons]; // Pares
        let flippedCards = [];
        let matchedPairs = 0;

        function initMemory() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            flippedCards = [];
            matchedPairs = 0;
            // Shuffle
            memoryCards.sort(() => 0.5 - Math.random());
            
            memoryCards.forEach((icon, index) => {
                const card = document.createElement('div');
                card.classList.add('memory-card');
                card.dataset.icon = icon;
                card.dataset.index = index;
                
                card.onclick = () => flipCard(card);
                
                // Front (hidden)
                const front = document.createElement('div');
                front.innerText = icon;
                card.appendChild(front);
                
                grid.appendChild(card);
            });
        }

        function flipCard(card) {
            if(flippedCards.length < 2 && !card.classList.contains('flipped')) {
                card.classList.add('flipped');
                card.innerText = card.dataset.icon; // Mostrar icono
                flippedCards.push(card);

                if(flippedCards.length === 2) {
                    checkMatch();
                }
            }
        }

        function checkMatch() {
            const [c1, c2] = flippedCards;
            if(c1.dataset.icon === c2.dataset.icon) {
                c1.classList.add('matched');
                c2.classList.add('matched');
                matchedPairs++;
                flippedCards = [];
            } else {
                setTimeout(() => {
                    c1.classList.remove('flipped');
                    c1.innerText = '';
                    c2.classList.remove('flipped');
                    c2.innerText = '';
                    flippedCards = [];
                }, 1000);
            }
        }

        // --- CLOCK ---
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerHTML = 
                `${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}<br>` +
                `<span style="font-size:0.7em; opacity:0.7">${now.getDate()}/${now.getMonth()+1}</span>`;
        }, 1000);

        // Inicializar
        openWindow('scheduleWin'); // Abrir horario por defecto

    </script>
</body>
</html>
